<?xml version="1.0" encoding="utf-8"?>
<base:BaseContainer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" 
                    xmlns:base="components.base.*"
                    width="100%" height="100%">
   <fx:Script>
      <![CDATA[
         import mx.collections.Sort;
         import mx.collections.SortField;
         
         import spark.events.TextOperationEvent;
         
         import utils.Localizer;
         import utils.StringUtil;
         import utils.assets.AssetNames;
//         
//         protected function nameSort_clickHandler(event:MouseEvent):void
//         {
//            ML.ratings.sort = new Sort();
//            ML.ratings.sort.fields = [new SortField('name', true)];
//            ML.ratings.refresh();
//         }
//         
//         
//         protected function pointsSort_clickHandler(event:MouseEvent):void
//         {
//            ML.ratings.sort = new Sort();
//            ML.ratings.sort.fields = [new SortField('points', true, true, true)];
//            ML.ratings.refresh();
//         }
         
         
         protected function textinput1_changeHandler(event:TextOperationEvent):void
         {
            ML.ratings.filterFunction = function (item: Object): Boolean
            {
               return String(item.name).toLowerCase().indexOf(searchText.text.toLowerCase()) != -1;
            };
            ML.ratings.refresh();
         }
         
      ]]>
   </fx:Script>
   <s:Group width="600">
      <s:Label text="{Localizer.string('Ratings', 'label.ratings')}" color="#eec500" fontSize="18" 
               fontWeight="bold" left="14"/>
      <s:Group right="0">
         <s:Label text="{Localizer.string('Ratings', 'label.search')}"/>
         <base:BaseTextInput id="searchText" width="400" change="textinput1_changeHandler(event)"/>
         <s:layout>
            <s:HorizontalLayout gap="3" verticalAlign="middle"/>
         </s:layout>
      </s:Group>
      
      <s:Group width="600" top="20">
         <s:BitmapImage source="{IMG.getImage(AssetNames.INFO_SCREEN_IMAGES_FOLDER + 'line')}"/>
      </s:Group>
   </s:Group>
   
   <s:Group width="600" height="100%">
      <!--s:Group width="100%">
         <s:Button id="nameSort" label="{Localizer.string('Ratings', 'label.sortNames')}"
                   click="nameSort_clickHandler(event)"/>
         <s:Button id="pointsSort" label="{Localizer.string('Ratings', 'label.sortPoints')}"
                   click="pointsSort_clickHandler(event)"/>
         <s:layout>
            <s:HorizontalLayout paddingLeft="10"/>
         </s:layout>
      </s:Group-->
      <base:Scroller left="0" right="0" top="0" bottom="0" stepMultiplier="3">
         <s:Group left="0" right="0">
            <mx:DataGrid dataProvider="{ML.ratings}" resizableColumns="false" selectable="false" 
                         draggableColumns="false" rowCount="{ML.ratings.length == 0? 1: ML.ratings.length}"
                         headerBackgroundSkin="components.skins.DataGridHeaderBackgroundSkin" 
                         horizontalCenter="0" width="100%" wordWrap="true">
               <mx:columns>
                  <mx:DataGridColumn dataField="rank" width="40"
                                     headerText="{Localizer.string('Ratings', 'rank')}" />
                  <mx:DataGridColumn dataField="name" textAlign="center" width="100"
                                     headerText="{Localizer.string('Ratings', 'player')}"/>
                  <mx:DataGridColumn dataField="alliance" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'alliance')}"/>
                  <mx:DataGridColumn dataField="planetsCount" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'planetsCount')}"/>
                  <mx:DataGridColumn dataField="economyPoints" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'economyPoints')}"/>
                  <mx:DataGridColumn dataField="sciencePoints" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'sciencePoints')}"/>
                  <mx:DataGridColumn dataField="armyPoints" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'armyPoints')}"/>
                  <mx:DataGridColumn dataField="warPoints" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'warPoints')}"/>
                  <mx:DataGridColumn dataField="points" textAlign="center" width="60"
                                     headerText="{Localizer.string('Ratings', 'points')}"/>
               </mx:columns>
            </mx:DataGrid>
         </s:Group>
      </base:Scroller>    
   </s:Group>
   <base:layout>
      <s:VerticalLayout horizontalAlign="center" gap="10" paddingTop="10"/>
   </base:layout>
</base:BaseContainer>
