<?xml version="1.0" encoding="utf-8"?>
<!--- Main menu component. Got a toggle button that shows/hides the menu. -->
<base:BaseContainer xmlns:base="components.base.*"
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    xmlns:fx="http://ns.adobe.com/mxml/2009"
                    mouseEnabled="false">
   
   <fx:Metadata>
      /**
      * Dispatched when player clicks logout button.
      * 
      * @eventType controllers.player.PlayerCommand.LOGIN
      */
      [Event(name="logout", type="controllers.player.PlayerCommand")]
   </fx:Metadata>
   
   <fx:Script>
      <![CDATA[
         import components.skins.StartButtonSkin;
         
         import controllers.players.PlayersCommand;
         import controllers.ui.NavigationController;
         
         import spark.components.Button;
         
         import utils.Localizer;
         import utils.assets.AssetNames;
         
         
         /**
          * Show and hide menu items when btnStart is toggled.
          */ 
         private function showHideMenu() : void
         {
            if (btnStart.selected)
            {
               menuItems.enabled = true;
            }
            else
            {
               menuItems.enabled = false;
            }
         }
         
         
         /**
          * When any of menu buttons is pressed menu should dissapear so
          * btnStart is clicked programaticaly. 
          */ 
         private function toggleStartButton(event:MouseEvent) : void
         {
            if (event.target is Button)
            {
               btnStart.selected = false;
               btnStart.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
            }
         }
         
         
         private function dispatchLogoutCommand() : void
         {
            new PlayersCommand(PlayersCommand.LOGOUT).dispatch();
         }
      ]]>
   </fx:Script>
   
   <!--- Toggle button that shows and hides menu. -->
   <s:ToggleButton id="btnStart" y="172" click="showHideMenu()" skinClass="components.skins.StartButtonSkin"/>
   
   <!--- Styled container for menu buttons. -->
   <s:SkinnableContainer id="menuItems" enabled="false" click="toggleStartButton(event)">
      
      <!--- Button for logging out from the game. -->
      <s:Group width="100%">
         <s:BitmapImage left="0" top="0" source="{IMG.getImage(AssetNames.START_MENU_FOLDER + 'holder')}"/>
         <s:Button id="btnLogout" click="dispatchLogoutCommand()" left="22" right="0" top="5" bottom="5"
                   label="{Localizer.string('MainMenu', 'label.logout')}"/>
      </s:Group>
      <!--- Button for viewing quest screen. -->
      <s:Group width="100%">
         <s:BitmapImage left="0" top="0" source="{IMG.getImage(AssetNames.START_MENU_FOLDER + 'holder')}"/>
         <s:Button id="btnQuests" click="NavigationController.getInstance().showQuests()" left="22" right="0" top="5" bottom="5"
                   label="{Localizer.string('MainMenu', 'label.quests')}"/>
      </s:Group>
      <!--- Button for viewing squadrons screen. -->
      <s:Group width="100%">
         <s:BitmapImage left="0" top="0" source="{IMG.getImage(AssetNames.START_MENU_FOLDER + 'holder')}"/>
         <s:Button id="btnSquadrons" click="NavigationController.getInstance().showSquadrons()" left="22" right="0" top="5" bottom="5"
                   label="{Localizer.string('MainMenu', 'label.squadrons')}"/>
      </s:Group>
      <s:layout>
         <s:VerticalLayout gap="1"/>
      </s:layout>
      
   </s:SkinnableContainer>
   
</base:BaseContainer>